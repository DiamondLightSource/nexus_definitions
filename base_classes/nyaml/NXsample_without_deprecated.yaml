category: base
doc: |
  Any information on the sample.
  
  This could include scanned variables that
  are associated with one of the data dimensions, e.g. the magnetic field, or
  logged data, e.g. monitored temperature vs elapsed time.
  However, this information is ideally stored in a dedicated NXenvironment on the application definition level.
type: group
NXsample(NXobject):
  name:
    doc: |
      Descriptive name of sample
  description:
    doc: |
      Description of the sample
  short_title:
    doc: |
      20 character fixed length sample description for legends
    # How is the string length limitation imposed by the XSD?
  sample_id(NX_CHAR):
    doc: |
      Identification number or signatures of the sample used.
  mass(NX_FLOAT):
    unit: NX_MASS
    doc: |
      Mass of sample
  density(NX_FLOAT):
    unit: NX_MASS_DENSITY
    doc: |
      Density of sample
  type:
    # This is neither complete nor should all of these enumerate options be here.
    enumeration: [sample, sample+can, can, sample+buffer, buffer, calibration sample, normalisation sample, simulated data, none, sample environment]
  thickness(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      sample thickness
  path_length(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      Path length through sample/can for simple case when
      it does not vary with scattering direction
  path_length_window(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      Thickness of a beam entry/exit window on the can (mm)
      - assumed same for entry and exit
  (NXsample_synthesis_step):
    doc:
      Information about a sample synthesis step.
  (NXbeam):
    doc: |
      Details of beam incident on sample - used to calculate sample/beam interaction point
  (NXsample_component):
    doc: |
      One group per sample component
      This is the perferred way of recording per component information over the n_comp arrays
  (NXsample_component_set):
    doc: |
      Set of sample components and their configuration.
  (NXsample_history):
    doc: |
      A set of physical processes that occurred to  the sample prior/during experiment.  
  (NXsubstance):
    doc: |
      Any substance contained in the sample.
  (NXfabrication):
    doc: |
      Details about the sample vendor (company or research group)
  (NXsample_substrate):
    doc: |
      Information about the material of the substrate in direct contact with the sample.
      Could be a sample holder for example.
  (NXenvironment):
    # eventually, this should be stored in the application definitions
    doc: |
      Any environmental or external stimuli/measurements.
      These can include, among others:
      applied pressure, surrounding gas phase and gas pressure,
      external electric/magnetic/stress fields, temperature, ...
  notes(NXnote):
    doc: |
      Further notes.
  transmission(NXdata):
    doc: |
      As a function of Wavelength
  (NXpositioner):
    doc: |
      Any positioner (motor, PZT, ...) used to locate the sample
  (NXoff_geometry):
    exists: ['min', '0']
    doc: |
      This group describes the shape of the sample
  \@default:
    doc: |
      .. index:: plotting
      
      Declares which child group contains a path leading
      to a :ref:`NXdata` group.
      
      It is recommended (as of NIAC2014) to use this attribute
      to help define the path to the default dataset to be plotted.
      See https://www.nexusformat.org/2014_How_to_find_default_data.html
      for a summary of the discussion.
  depends_on(NX_CHAR):
    doc: |
      NeXus positions components by applying a set of translations and rotations
      to apply to the component starting from 0, 0, 0. The order of these operations
      is critical and forms what NeXus calls a dependency chain. The depends_on
      field defines the path to the top most operation of the dependency chain or the
      string "." if located in the origin. Usually these operations are stored in a
      NXtransformations group. But NeXus allows them to be stored anywhere.
  (NXtransformations):
    doc: |
      This is the group recommended for holding the chain of translation
      and rotation operations necessary to position the component within
      the instrument. The dependency chain may however traverse similar groups in
      other component groups.

# Still here, should eventually be deprecated.
  relative_molecular_mass(NX_FLOAT):
    unit: NX_MASS
    doc: |
      Relative Molecular Mass of sample
  changer_position(NX_INT):
    unit: NX_UNITLESS
    doc: |
      Sample changer position
      Note, it is recommended to use NXpositioner instead.
  state(NX_CHAR):
    doc: |
      Physical state of the sample. Should be described in more detail.
  purity(NX_FLOAT):
    unit: NX_UNITLESS
    doc: |
      Chemical purity of the sample
  temperature_log(NXlog):
    deprecated: |
      use ``temperature``, see: https://github.com/nexusformat/definitions/issues/816
    doc: |
      temperature_log.value is a link to e.g. temperature_env.sensor1.value_log.value
  temperature_env(NXenvironment):
    doc: |
      Additional sample temperature environment information
      Note, it is recommended to have NXenvironment as a stand-alone in the application definition.
  magnetic_field(NXlog):
    doc: |
      magnetic_field.value is a link to e.g. magnetic_field_env.sensor1.value
  magnetic_field_env(NXenvironment):
    doc: |
      Additional sample magnetic environment information
      Note, it is recommended to have NXenvironment as a stand-alone in the application definition.
  rotation_angle(NX_FLOAT):
    unit: NX_ANGLE
    doc: |
      Optional rotation angle for the case when the powder diagram has
      been obtained through an omega-2theta scan like from a traditional
      single detector powder diffractometer.
      Note, it is recommended to use NXtransformations instead.
  x_translation(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      Translation of the sample along the X-direction of the laboratory coordinate system
      Note, it is recommended to use NXtransformations instead.
  distance(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      Translation of the sample along the Z-direction of the laboratory coordinate system.
      Note, it is recommended to use NXtransformations instead.