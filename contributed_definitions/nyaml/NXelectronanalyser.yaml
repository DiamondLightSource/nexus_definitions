category: base
doc: |
  Subclass of NXinstrument to describe a photoelectron analyser.
symbols:
  doc: |
    The symbols used in the schema to specify e.g. dimensions of arrays
  nfa: |
    Number of fast axes (axes acquired simultaneously, without scanning a
    physical quantity)
  nsa: |
    Number of slow axes (axes acquired scanning a physical quantity)
  n_transmission_function: |
    Number of data points in the transmission function.
type: group
NXelectronanalyser(NXobject):
  description(NX_CHAR):
    doc: |
      Free text description of the type of the detector
  name(NX_CHAR):
    doc: |
      Name or model of the equipment
    \@short_name:
      type: NX_CHAR
      doc: |
        Acronym or other shorthand name
  work_function(NX_FLOAT):
    doc: |
      Work function of the electron analyser.

      The work function of a uniform surface of a conductor is the minimum energy required to remove 
      an electron from the interior of the solid to a vacuum level immediately outside the solid surface.
      
      The kinetic energy :math:`E_K` of a photoelectron emitted from an energy-level with binding energy 
      :math:`E_B` below the Fermi level is given by :math:`E_K = h\nu - E_B - e \phi_{\mathbf{sample}}`,
      where :math:`\phi_{\mathbf{sample}}` is the work function of the sample surface. In PES measurements,
      the sample and the spectrometer (with work function :math:`\phi_{\mathbf{spectr.}}`) are electrically
      connected and therefore their Fermi levels are aligned. Due to the difference in local vacuum level 
      between the sample and spectrometer, there exists an electric potential difference (contact potential) 
      :math:`\Delta\phi = \phi_{\mathbf{sample}} - \phi_{\mathbf{spectr.}}`. The measured kinetic energy of 
      a photoelectron in PES is therefore given by 
      :math:`E_K^{\mathbf{meas.}} = h\nu - E_B + \Delta \phi = h\nu - E_B - e \phi_{\mathbf{spectr.}}`. 
      As a result, the measured kinetic energy :math:`E_K^{\mathbf{meas.}}` of a photoelectron is independent
      of the sample work function. Nonetheless, the work function :math:`\phi_s` needs to be known to 
      accurately determine the binding energy scale.
    unit: NX_ENERGY
  energy_resolution(NX_FLOAT):
    unit: NX_ENERGY
    doc: |
      Energy resolution of the electron analyser (FWHM of gaussian broadening)
  momentum_resolution(NX_FLOAT):
    unit: NX_WAVENUMBER
    doc: |
      Momentum resolution of the electron analyser (FWHM)
  angular_resolution(NX_FLOAT):
    unit: NX_ANGLE
    doc: |
      Angular resolution of the electron analyser (FWHM)
  spatial_resolution(NX_FLOAT):
    unit: NX_LENGTH
    doc: |
      Spatial resolution of the electron analyser (Airy disk radius)
  fast_axes(NX_CHAR):
    doc: |
      List of the axes that are acquired simultaneously by the detector.
      These refer only to the experimental variables recorded by the electron analyser.
      Other variables such as temperature, manipulator angles etc. are labeled as fast or slow in the data.
      
      .. csv-table:: Examples
        :header: "Mode", "fast_axes", "slow_axes"
      
        Hemispherical in ARPES mode,  "['energy', 'kx']",""
        "Hemispherical with channeltron, sweeping energy mode", "", [\"energy\"]
        "Tof", "['energy', 'kx', 'ky']",""
        "Momentum microscope, spin-resolved", "['energy', 'kx', 'ky']", "['spin up-down', 'spin left-right']"
      
      Axes may be less abstract than this, i.e. ['detector_x', 'detector_y'].
      If energy_scan_mode=sweep, fast_axes: ['energy', 'kx']; slow_axes: ['energy'] is allowed.
    dimensions:
      rank: 1
      dim: [[1, nfa]]
  slow_axes(NX_CHAR):
    doc: |
      List of the axes that are acquired by scanning a physical parameter, listed in
      order of decreasing speed. See fast_axes for examples.
    dimensions:
      rank: 1
      dim: [[1, nsa]]
  transmission_function(NXdata):
    doc: |
      Transmission function of the electron analyser.

      The transmission function (TF) specifies the detection efficiency for electrons of 
      different kinetic energy passing through the electron analyser. It depends on the spectrometer
      geometry as well as operation settings such as lens mode and pass energy.
      The transmission function is usually given as kinetic energy vs. relative intensity.

      The TF is used for calibration of the intensity scale in quantitative XPS. Without proper 
      transmission correction, a comparison of results measured from the same sample using different
      operating modes for an instrument would show significant variations in atomic
      concentrations.
    \@signal:
      enumeration: [relative_intensity]
    \@axes:
      enumeration: [kinetic_energy]    
    kinetic_energy(NX_FLOAT):
      doc: |
        Kinetic energy values
      unit: NX_ENERGY
      dim: (n_transmission_function,)
    relative_intensity(NX_FLOAT):
      doc: |
        Relative transmission efficiency for the given kinetic energies 
      unit: NX_UNITLESS
      dim: (n_transmission_function,)
  depends_on(NX_CHAR):
    doc: |
      Refers to the last transformation specifying the position of the manipulator in
      the NXtransformations chain.
  (NXtransformations):
    doc: |
      Collection of axis-based translations and rotations to describe the location and
      geometry of the electron analyser as a component in the instrument. Conventions
      from the NXtransformations base class are used. In principle, the McStas
      coordinate system is used. The first transformation has to point either to
      another component of the system or . (for pointing to the reference frame) to
      relate it relative to the experimental setup. Typically, the components of a
      system should all be related relative to each other and only one component
      should relate to the reference coordinate system.
  (NXcollectioncolumn):
    doc: |
      Describes the electron collection (spatial and momentum imaging) column
  (NXenergydispersion):
    doc: |
      Describes the energy dispersion section
  (NXspindispersion):
    doc: |
      Describes the spin dispersion section
  (NXdetector):
    doc: |
      Describes the electron detector
  (NXdeflector):
    doc: |
      Deflectors outside the main optics ensambles described by the subclasses
  (NXlens_em):
    doc: |
      Individual lenses outside the main optics ensambles described by the subclasses
