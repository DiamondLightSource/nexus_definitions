<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition category="application" extends="NXobject" name="NXapm_paraprobe_results_transcoder" type="group" xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <symbols>
        <doc>
             The symbols used in the schema to specify e.g. dimensions of arrays.
        </doc>
    </symbols>
    <doc>
         Results of a paraprobe-transcoder software tool run.
    </doc>
    <group type="NXentry">
        <attribute name="version">
            <doc>
                 Version specifier of this application definition.
            </doc>
        </attribute>
        <field name="definition" type="NX_CHAR">
            <doc>
                 Official NeXus NXDL schema with which this file was written.
            </doc>
            <enumeration>
                <item value="NXapm_paraprobe_results_transcoder"/>
            </enumeration>
        </field>
        <field name="program" type="NX_CHAR">
            <doc>
                 Given name of the program/software/tool with which this NeXus
                 (configuration) file was generated.
            </doc>
            <attribute name="version" type="NX_CHAR">
                <doc>
                     Ideally program version plus build number, or commit hash or description
                     of ever persistent resources where the source code of the program and
                     build instructions can be found so that the program can be configured
                     ideally in such a manner that the result of this computational process
                     is recreatable in the same deterministic manner.
                </doc>
            </attribute>
        </field>
        <field name="analysis_identifier" optional="true" type="NX_CHAR">
            <doc>
                 Ideally, a (globally persistent) unique identifier for referring
                 to this analysis.
            </doc>
        </field>
        <field name="analysis_description" optional="true" type="NX_CHAR">
            <doc>
                 Possibility for leaving a free-text description about this analysis.
            </doc>
        </field>
        <field name="time_stamp" type="NX_DATE_TIME">
            <doc>
                 ISO 8601 formatted time code with local time zone offset to UTC
                 information included when this configuration file was created.
            </doc>
        </field>
        <field name="config_filename" type="NX_CHAR">
            <doc>
                 The absolute path and name of the config file for this analysis.
            </doc>
            <attribute name="version" type="NX_CHAR">
                <doc>
                     At least SHA256 strong hash of the specific config_file for
                     tracking provenance.
                </doc>
            </attribute>
        </field>
        <group recommended="true" type="NXuser">
            <doc>
                 If used, contact information and eventually details
                 of at least the person who performed this analysis.
            </doc>
            <field name="name" type="NX_CHAR"/>
            <field name="affiliation" recommended="true" type="NX_CHAR"/>
            <field name="address" optional="true" type="NX_CHAR"/>
            <field name="email" recommended="true" type="NX_CHAR"/>
            <field name="orcid" recommended="true" type="NX_CHAR"/>
            <field name="orcid_platform" recommended="true" type="NX_CHAR"/>
            <field name="telephone_number" optional="true" type="NX_CHAR"/>
            <field name="role" recommended="true" type="NX_CHAR"/>
            <field name="social_media_name" optional="true" type="NX_CHAR"/>
            <field name="social_media_platform" optional="true" type="NX_CHAR"/>
        </group>
        <group type="NXcoordinate_system_set">
            <doc>
                 Details about the coordinate system conventions used.
            </doc>
            <group maxOccurs="unbounded" minOccurs="1" type="NXtransformations">
                <doc>
                     The individual coordinate systems which used.
                     fields should be prefixed with a prefix taken from an
                     enumeration which details the individual coordinate systems:
                     
                     * lab
                     * specimen
                     * laser
                     * leap
                     * detector
                     * recon
                </doc>
            </group>
        </group>
        <group maxOccurs="1" minOccurs="1" name="results" type="NXprocess">
            <doc>
                 Paraprobe-transcoder prepares the data in POS, ePOS, APT files from
                 APSuite, RRNG, RNG, and NeXus/HDF5 NXapm in such a way that they can
                 be used with the tools of the paraprobe-toolbox.
            </doc>
            <group name="reconstruction" type="NXcg_point_set">
                <field name="dimensionality" type="NX_POSINT"/>
                <field name="cardinality" type="NX_POSINT"/>
                <field name="identifier_offset" type="NX_INT"/>
                <field name="position" type="NX_NUMBER"/>
            </group>
            <group name="ranging" type="NXcollection">
                <group maxOccurs="256" minOccurs="1" type="NXion">
                    <doc>
                         This is the collection of iontypes distinguished.
                         The default unknown iontype always has to map to 0.
                         Its non-physical mass_to_charge_state_ratio is [0., 0.001] Da.
                    </doc>
                    <field name="ion_type" optional="true" type="NX_UINT"/>
                    <field name="isotope_vector" type="NX_UINT"/>
                    <field name="nuclid_list" recommended="true" type="NX_UINT"/>
                    <field name="charge_state" type="NX_INT"/>
                    <field name="name" optional="true" type="NX_CHAR"/>
                    <field name="mass_to_charge_range" type="NX_FLOAT"/>
                </group>
            </group>
        </group>
        <group name="performance" recommended="true" type="NXcs_profiling">
            <field name="command_line_call" optional="true" type="NX_CHAR"/>
            <field name="start_time" recommended="true" type="NX_DATE_TIME"/>
            <field name="end_time" recommended="true" type="NX_DATE_TIME"/>
            <field name="total_elapsed_time" type="NX_NUMBER"/>
            <field name="number_of_processes" type="NX_POSINT"/>
            <field name="number_of_threads" type="NX_POSINT"/>
            <field name="number_of_gpus" type="NX_POSINT"/>
            <group recommended="true" type="NXcs_computer">
                <field name="name" recommended="true" type="NX_CHAR"/>
                <field name="operating_system" type="NX_CHAR">
                    <attribute name="version" type="NX_CHAR"/>
                </field>
                <field name="uuid" optional="true" type="NX_CHAR"/>
                <group maxOccurs="unbounded" minOccurs="0" type="NXcs_cpu">
                    <field name="name" optional="true" type="NX_CHAR"/>
                    <group recommended="true" type="NXmanufacturer">
                        <field name="name" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="identifier" optional="true" type="NX_CHAR"/>
                        <field name="capabilities" optional="true" type="NX_CHAR"/>
                    </group>
                </group>
                <group maxOccurs="unbounded" minOccurs="0" type="NXcs_gpu">
                    <field name="name" optional="true" type="NX_CHAR"/>
                    <group recommended="true" type="NXmanufacturer">
                        <field name="name" type="NX_CHAR"/>
                        <field name="model" type="NX_CHAR"/>
                        <field name="identifier" optional="true" type="NX_CHAR"/>
                        <field name="capabilities" optional="true" type="NX_CHAR"/>
                    </group>
                </group>
                <group maxOccurs="1" minOccurs="0" type="NXcs_mm_sys">
                    <field name="total_physical_memory" type="NX_NUMBER"/>
                </group>
                <group maxOccurs="1" minOccurs="0" type="NXcs_io_sys">
                    <group maxOccurs="unbounded" minOccurs="1" type="NXcs_io_obj">
                        <field name="technology" type="NX_CHAR"/>
                        <field name="max_physical_capacity" type="NX_NUMBER"/>
                        <field name="name" optional="true" type="NX_CHAR"/>
                        <group recommended="true" type="NXmanufacturer">
                            <field name="name" type="NX_CHAR"/>
                            <field name="model" type="NX_CHAR"/>
                            <field name="identifier" optional="true" type="NX_CHAR"/>
                            <field name="capabilities" optional="true" type="NX_CHAR"/>
                        </group>
                    </group>
                </group>
                <group type="NXcs_profiling_event">
                    <field name="start_time" optional="true" type="NX_DATE_TIME"/>
                    <field name="end_time" optional="true" type="NX_DATE_TIME"/>
                    <field name="description" type="NX_CHAR"/>
                    <field name="elapsed_time" type="NX_NUMBER"/>
                    <field name="number_of_processes" type="NX_POSINT">
                        <doc>
                             Specify if it was different from the number_of_processes
                             in the NXcs_profiling super class.
                        </doc>
                    </field>
                    <field name="number_of_threads" type="NX_POSINT">
                        <doc>
                             Specify if it was different from the number_of_threads 
                             in the NXcs_profiling super class.
                        </doc>
                    </field>
                    <field name="number_of_gpus" type="NX_POSINT">
                        <doc>
                             Specify if it was different from the number_of_threads 
                             in the NXcs_profiling super class.
                        </doc>
                    </field>
                    <field name="max_virtual_memory_snapshot" recommended="true" type="NX_NUMBER"/>
                    <field name="max_resident_memory_snapshot" recommended="true" type="NX_NUMBER"/>
                </group>
            </group>
        </group>
    </group>
</definition>
