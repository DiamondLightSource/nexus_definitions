<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition category="base" extends="NXobject" name="NXion" type="group" xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">
	<doc>Atomic architecture of a (molecular) ion (fragment) which can be used for example to label charged molecule ions identified from mass-to-charge histogram data as appearing as signal in e.g. time-resolved mass spectrometry techniques like atom probe or secondary ion mass spectrometry.</doc>
	<symbols>
		<doc>The symbols used in the schema to specify e.g. dimensions of arrays.</doc>
		<symbol doc="Maximum number of allowed atoms per (molecular) ion (fragment)." name="Nivecmax"/>
		<symbol doc="Number of mass-to-charge-state-ratio range intervals mapped on this ion type." name="Nranges"/>
	</symbols>
	<field name="ion_type" type="NX_UINT" units="NX_UNITLESS">
		<doc>Ion type aka ion species identifier. The identifier zero is reserved for the special ion type unknown ion type.</doc>
	</field>
	<field name="isotope_vector" type="NX_UINT" units="NX_UNITLESS">
		<doc>A vector of ordered isotope hash values. The values have to be arranged in the array in decreasing order. The array is filled with zero hash values indicating unused places. The individual hash values are built with the following hash function. Hashvalue = Z + N*256 where Z is the number of protons and N the number of neutrons of the isotope. Z and N have to be 8-bit unsigned integers for this hash function to work.</doc>
		<dimensions rank="1">
			<dim index="1" value="Nivecmax"/>
		</dimensions>
	</field>
	<field name="charge_state" type="NX_INT" units="NX_DIMENSIONLESS">
		<doc>Signed charge of the ion in multiples of the elementary electron charge. Only positive values will be measured in atom probe microscopy as the ions are accelerated by a negatively signed bias electric field. In the case the charge state is not recoverable explicitly, the value should be set to zero. This is for example the case when using classical range file formats (RNG, RRNG) because for atom probe microscopy these files do not document the charge state explicitly but report just a integer fraction of the theoretical mass-to-charge-state-ratios.</doc>
	</field>
	<field name="name" type="NX_CHAR">
		<doc>Human-readable ion type name (e.g. Al3+), i.e. ASCII UTF-8 character array, ideally using LaTeX notation to specify the ion and charge state. Examples 12C+, Al3+ or H+. Although human-readable and intuitive, parsing such names becomes impractical for more complicated cases. Therefore, the isotope_vector is the preferred machine-readable format.</doc>
	</field>
	<field name="mass_to_charge_range" type="NX_FLOAT" units="NX_ANY">
		<doc>Lower (mqmin) and upper (mqmax) bounds of a mass-to-charge interval [mqmin, mqmax] (boundaries included) where assigned signal for the respective ion is labelled as this ion.</doc>
		<dimensions rank="2">
			<dim index="1" value="2"/>
			<dim index="2" value="Nranges"/>
		</dimensions>
	</field>
</definition>
